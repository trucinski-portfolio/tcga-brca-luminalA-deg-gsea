# Data Directory README

This directory contains all data inputs and intermediate artifacts required for the **TCGA-BRCA Luminal A Invasive Ductal Carcinoma (IDC)** differential expression and pathway enrichment pipeline.

Due to file size and licensing constraints, **raw TCGA data and GSEA outputs are not tracked in Git** and must be provided locally.

---

## Directory Structure Overview

data/
├── raw/
│   └── preprocessing_inputs/        # Raw TCGA inputs (NOT tracked)
│
├── processed/
│   ├── preprocessing_outputs/       # Outputs from preprocessing (generated)
│   └── GSEA_input/                  # Ranked list for GSEA (generated)
│
├── GSEA_output/                     # External GSEA results (NOT tracked)
│   ├── Hallmark-All/
│   ├── KEGG-Legacy/
│   └── KEGG-Medicus/
│
└── README.md

---

## 1. Raw TCGA Data (NOT tracked in Git)

Raw expression and clinical phenotype data were obtained from the **UCSC Xena Browser** (TCGA-BRCA cohort).

These files **must exist locally** but are excluded from version control.

### Required files

- HiSeqV2_PANCAN.gz  
  TCGA BRCA RNA-seq expression matrix (Illumina HiSeq, pancan normalized)

- BRCA_clinicalMatrix.tsv  
  TCGA BRCA clinical and phenotype metadata

### Expected local path

data/raw/preprocessing_inputs/
├── HiSeqV2_PANCAN.gz
└── BRCA_clinicalMatrix.tsv

### Download sources

Expression matrix:  
https://tcga-xena-hub.s3.us-east-1.amazonaws.com/download/TCGA.BRCA.sampleMap%2FHiSeqV2_PANCAN.gz

Clinical metadata:  
https://tcga-xena-hub.s3.us-east-1.amazonaws.com/download/TCGA.BRCA.sampleMap%2FBRCA_clinicalMatrix

These files are consumed by:
- scripts/01_preprocessing.ipynb

---

## 2. Processed Intermediate Data (Generated by pipeline)

Intermediate outputs generated by the preprocessing and differential expression steps are written to:

data/processed/

### 2.1 Preprocessing outputs

Generated by scripts/01_preprocessing.ipynb.

data/processed/preprocessing_outputs/
├── metadata_LumA_IDC_Tumor_vs_AllNormals.tsv
└── expr_LumA_IDC_Tumor_vs_AllNormals.tsv

- Metadata contains sample IDs, group labels (Tumor vs Normal), molecular subtype, and histology.
- Expression matrix is restricted to the samples used in the final contrast.

### 2.2 GSEA input (ranked list)

Generated by scripts/02_differential_expression.ipynb.

data/processed/GSEA_input/
└── LumA_IDC_Tumor_vs_AllNormals.rnk

- Ranked by **limma t-statistics**
- Directionality preserved
- Used as input for **GSEA Preranked**

These files can be regenerated at any time by rerunning the pipeline.

---

## 3. GSEA Output Data (External tool, NOT tracked in Git)

Gene Set Enrichment Analysis is performed **outside the pipeline** using the UCSD/Broad Institute **GSEA_4.4.0** software.

The pipeline does **not** run GSEA internally.

### Required outputs per gene set library

For each gene set library, the following files must be copied into the appropriate directory:

- gsea_report_for_na_pos_*.tsv
- gsea_report_for_na_neg_*.tsv

### Expected directory structure

data/GSEA_output/
├── Hallmark-All/
│   ├── gsea_report_for_na_pos_*.tsv
│   └── gsea_report_for_na_neg_*.tsv
│
├── KEGG-Legacy/
│   ├── gsea_report_for_na_pos_*.tsv
│   └── gsea_report_for_na_neg_*.tsv
│
└── KEGG-Medicus/
    ├── gsea_report_for_na_pos_*.tsv
    └── gsea_report_for_na_neg_*.tsv

Notes:
- Timestamped filenames are expected and handled automatically.
- HTML reports generated by GSEA are not used by the pipeline.
- Results must correspond to the t-stat–based ranked list generated in Step 2.

These files are consumed by:
- scripts/03_visualization.ipynb

---

## 4. Final Outputs (Tracked in Git)

Final figures and summary tables generated by the pipeline are written to:

results/
├── figures/
│   ├── volcano plots
│   ├── GSEA waterfall plots
│   └── DEG heatmaps
│
└── tables/
    ├── DEG result tables
    └── combined GSEA summary tables

These outputs are fully reproducible given the required raw data and GSEA outputs.

---

## Reproducibility Notes

- The pipeline is deterministic up to the GSEA step.
- GSEA results depend on:
  - External software version
  - Gene set library versions
  - Ranking metric (t-statistics)
- All scripts assume execution from the repository root.

---

## Summary

- Raw TCGA data → manually downloaded  
- Preprocessing and differential expression → fully automated  
- GSEA → manual external step  
- Visualization and summaries → automated once GSEA outputs are placed correctly  

This separation is intentional and documented to ensure transparency and reproducibility.
